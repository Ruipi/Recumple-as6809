ASxxxx Assembler V05.40  (Motorola 6809)                                Page 1
Hexadecimal [16-Bits]                                 Tue May 17 23:20:34 2022



                              1 
                              2     .module recumple
                              3 
                              4     .area PROG (ABS)
                              5 
   0150                       6     .org 0x150
                              7 	.globl programa
                              8 
   0150 19 90                 9 aNo:            .word 0x1990 	; Año de nacimiento (BCD) 
   0152 00 08                10 mes:	    	.word 0x8	; Mes de nacimiento (BCD) 
   0154 00 29                11 dia:	        .word 0x29 	; Dia de nacimiento (BCD)
   0156 14                   12 Ncumples:     	.byte 20	; Numero de Recumples a calcular
   0157 20 65 6E 65 72 6F    13 enero_str:      .asciz " enero "
        20 00
   015F 20 66 65 62 72 65    14 febrero_str:    .asciz " febrero "
        72 6F 20 00
   0169 20 6D 61 72 7A 6F    15 marzo_str:      .asciz " marzo "
        20 00
   0171 20 61 62 72 69 6C    16 abril_str:      .asciz " abril "
        20 00
   0179 20 6D 61 79 6F 20    17 mayo_str:       .asciz " mayo "
        00
   0180 20 6A 75 6E 69 6F    18 junio_str:      .asciz " junio "
        20 00
   0188 20 6A 75 6C 69 6F    19 julio_str:      .asciz " julio "
        20 00
   0190 20 61 67 6F 73 74    20 agosto_str:     .asciz " agosto "
        6F 20 00
   0199 20 73 65 70 74 69    21 septiembre_str: .asciz " septiembre "
        65 6D 62 72 65 20
        00
   01A6 20 6F 63 74 75 62    22 octubre_str:    .asciz " octubre "
        72 65 20 00
   01B0 20 6E 6F 76 69 65    23 noviembre_str:  .asciz " noviembre "
        6D 62 72 65 20 00
   01BC 20 64 69 63 69 65    24 diciembre_str:  .asciz " diciembre "
        6D 62 72 65 20 00
                             25 
                             26 
   01C8                      27 programa:
   01C8 A6 8C 8A      [ 5]   28 	lda dia+1,pcr
   01CB A7 8C 86      [ 5]   29     sta dia,pcr
   01CE A6 8C 82      [ 5]   30 	lda mes+1,pcr
   01D1 A7 8D FF 7D   [ 9]   31 	sta mes,pcr
   01D5 10 CE F0 00   [ 4]   32 	lds #0xF000
   01D9 CE F1 00      [ 3]   33 	ldu #0xF100
   01DC 86 00         [ 2]   34 	lda #0x0
   01DE 97 80         [ 4]   35 	sta 0x80
   01E0 86 00         [ 2]   36 	lda #0
   01E2 97 81         [ 4]   37 	sta 0x81
   01E4 17 00 93      [ 9]   38 	lbsr poner_pila
                             39 
   01E7                      40 bucle_n_cumple:
   01E7 17 00 A5      [ 9]   41 	lbsr sacar_pila
   01EA 17 00 8D      [ 9]   42 	lbsr poner_pila
ASxxxx Assembler V05.40  (Motorola 6809)                                Page 2
Hexadecimal [16-Bits]                                 Tue May 17 23:20:34 2022



   01ED 17 01 3B      [ 9]   43 	lbsr sumar_anio
   01F0 17 01 B0      [ 9]   44 	lbsr sumar_mes
   01F3 17 01 BB      [ 9]   45 	lbsr comprobar_mes
   01F6 17 01 E5      [ 9]   46 	lbsr suma_dia
   01F9 17 01 F0      [ 9]   47 	lbsr comprobar_dia
   01FC 17 01 B2      [ 9]   48 	lbsr comprobar_mes
   01FF 8D 4A         [ 7]   49 	bsr presentar
                             50 
   0201                      51 compara_iter:
   0201 17 01 18      [ 9]   52 	lbsr sumar_iteracion
   0204 96 81         [ 4]   53 	lda 0x81
   0206 B1 01 56      [ 5]   54 	cmpa Ncumples
   0209 23 DC         [ 3]   55 	bls bucle_n_cumple
   020B 16 02 9B      [ 5]   56 	lbra acabar
                             57 	
   020E                      58 imprime_iter:
   020E 96 80         [ 4]   59 	lda 0x80
   0210 17 02 31      [ 9]   60 	lbsr imprime	
   0213 39            [ 5]   61 	rts
                             62 
   0214                      63 imprime_dia:
   0214 B6 01 54      [ 5]   64 	lda dia
   0217 17 02 2A      [ 9]   65 	lbsr imprime
   021A 39            [ 5]   66 	rts 
                             67 
   021B                      68 imprime_mes:
   021B B6 01 52      [ 5]   69 	lda mes
   021E 17 02 23      [ 9]   70 	lbsr imprime
   0221 39            [ 5]   71 	rts
                             72 
   0222                      73 imprime_ano:
   0222 FC 01 50      [ 6]   74 	ldd aNo
   0225 81 20         [ 2]   75 	cmpa #0x20
   0227 25 0E         [ 3]   76 	blo imprime_19
   0229 86 20         [ 2]   77 	lda #0x20
   022B 17 02 16      [ 9]   78 	lbsr imprime
   022E FC 01 50      [ 6]   79 	ldd aNo
   0231 1E 89         [ 8]   80 	exg a,b
   0233 17 02 0E      [ 9]   81 	lbsr imprime
   0236 39            [ 5]   82 	rts
                             83 
   0237                      84 imprime_19:
   0237 86 19         [ 2]   85 	lda #0x19
   0239 17 02 08      [ 9]   86 	lbsr imprime
   023C FC 01 50      [ 6]   87 	ldd aNo
   023F 1E 89         [ 8]   88 	exg a,b
   0241 17 02 00      [ 9]   89 	lbsr imprime
   0244 39            [ 5]   90 	rts
                             91 	
   0245                      92 imprime_salto:
   0245 86 0A         [ 2]   93 	lda #'\n
   0247 B7 FF 00      [ 5]   94 	sta 0xFF00
   024A 39            [ 5]   95 	rts
                             96 
   024B                      97 presentar:
ASxxxx Assembler V05.40  (Motorola 6809)                                Page 3
Hexadecimal [16-Bits]                                 Tue May 17 23:20:34 2022



   024B 8D C1         [ 7]   98 	bsr imprime_iter
   024D 86 3A         [ 2]   99 	lda #0x3A
   024F B7 FF 00      [ 5]  100 	sta 0xFF00
   0252 86 20         [ 2]  101 	lda #0x20
   0254 B7 FF 00      [ 5]  102 	sta 0xFF00
   0257 8D BB         [ 7]  103 	bsr imprime_dia
   0259 86 20         [ 2]  104 	lda #0x20
   025B B7 FF 00      [ 5]  105 	sta 0xFF00
   025E 8D 0F         [ 7]  106 	bsr imprime_de
   0260 17 00 7D      [ 9]  107 	lbsr mostrarMes
   0263 8D 0A         [ 7]  108 	bsr imprime_de
   0265 86 20         [ 2]  109 	lda #0x20
   0267 B7 FF 00      [ 5]  110 	sta 0xFF00
   026A 8D B6         [ 7]  111 	bsr imprime_ano
   026C 8D D7         [ 7]  112 	bsr imprime_salto
   026E 39            [ 5]  113 	rts
                            114 
   026F                     115 imprime_de:
   026F 86 64         [ 2]  116 	lda #100
   0271 C6 65         [ 2]  117 	ldb #101
   0273 B7 FF 00      [ 5]  118 	sta 0xFF00
   0276 F7 FF 00      [ 5]  119 	stb 0xFF00
   0279 39            [ 5]  120 	rts
                            121 
   027A                     122 poner_pila:
   027A A6 8D FE D6   [ 9]  123 	lda dia,pcr
   027E 36 02         [ 6]  124 	pshu a
   0280 A6 8D FE CE   [ 9]  125 	lda mes,pcr
   0284 36 02         [ 6]  126 	pshu a
   0286 EC 8D FE C6   [10]  127 	ldd aNo,pcr
   028A 36 04         [ 6]  128 	pshu b
   028C 36 02         [ 6]  129 	pshu a
   028E 39            [ 5]  130 	rts 
                            131 
   028F                     132 sacar_pila:
   028F 37 02         [ 6]  133 	pulu a
   0291 37 04         [ 6]  134 	pulu b
   0293 ED 8D FE B9   [10]  135 	std aNo,pcr
   0297 37 02         [ 6]  136 	pulu a
   0299 A7 8D FE B5   [ 9]  137 	sta mes,pcr
   029D 37 02         [ 6]  138 	pulu a
   029F A7 8D FE B1   [ 9]  139 	sta dia,pcr
   02A3 39            [ 5]  140 	rts
                            141 
   02A4                     142 enero:
   02A4 8E 01 57      [ 3]  143 	ldx #enero_str
   02A7 20 68         [ 3]  144 	bra imprimir
                            145 
   02A9                     146 febrero:
   02A9 8E 01 5F      [ 3]  147 	ldx #febrero_str
   02AC 20 63         [ 3]  148 	bra imprimir
                            149 
   02AE                     150 marzo:
   02AE 8E 01 69      [ 3]  151 	ldx #marzo_str
   02B1 20 5E         [ 3]  152 	bra imprimir
ASxxxx Assembler V05.40  (Motorola 6809)                                Page 4
Hexadecimal [16-Bits]                                 Tue May 17 23:20:34 2022



                            153 
   02B3                     154 abril:
   02B3 8E 01 71      [ 3]  155 	ldx #abril_str
   02B6 20 59         [ 3]  156 	bra imprimir
                            157 
   02B8                     158 mayo:
   02B8 8E 01 79      [ 3]  159 	ldx #mayo_str
   02BB 20 54         [ 3]  160 	bra imprimir
                            161 
   02BD                     162 junio:
   02BD 8E 01 80      [ 3]  163 	ldx #junio_str
   02C0 20 4F         [ 3]  164 	bra imprimir
                            165 
   02C2                     166 julio:
   02C2 8E 01 88      [ 3]  167 	ldx #julio_str
   02C5 20 4A         [ 3]  168 	bra imprimir
                            169 
   02C7                     170 agosto:
   02C7 8E 01 90      [ 3]  171 	ldx #agosto_str
   02CA 20 45         [ 3]  172 	bra imprimir
                            173 
   02CC                     174 septiembre:
   02CC 8E 01 99      [ 3]  175 	ldx #septiembre_str
   02CF 20 40         [ 3]  176 	bra imprimir
                            177 
   02D1                     178 octubre:
   02D1 8E 01 A6      [ 3]  179 	ldx #octubre_str
   02D4 20 3B         [ 3]  180 	bra imprimir
                            181 
   02D6                     182 noviembre:
   02D6 8E 01 B0      [ 3]  183 	ldx #noviembre_str
   02D9 20 36         [ 3]  184 	bra imprimir
                            185 
   02DB                     186 diciembre:
   02DB 8E 01 BC      [ 3]  187 	ldx #diciembre_str
   02DE 20 31         [ 3]  188 	bra imprimir
                            189 
   02E0                     190 mostrarMes:
   02E0 F6 01 52      [ 5]  191 	ldb mes
   02E3 C1 01         [ 2]  192 	cmpb #0x1
   02E5 27 BD         [ 3]  193 	beq enero
   02E7 C1 02         [ 2]  194 	cmpb #0x2
   02E9 27 BE         [ 3]  195 	beq febrero
   02EB C1 03         [ 2]  196 	cmpb #0x3
   02ED 27 BF         [ 3]  197 	beq marzo
   02EF C1 04         [ 2]  198 	cmpb #0x4
   02F1 27 C0         [ 3]  199 	beq abril
   02F3 C1 05         [ 2]  200 	cmpb #0x5
   02F5 27 C1         [ 3]  201 	beq mayo
   02F7 C1 06         [ 2]  202 	cmpb #0x6
   02F9 27 C2         [ 3]  203 	beq junio
   02FB C1 07         [ 2]  204 	cmpb #0x7
   02FD 27 C3         [ 3]  205 	beq julio
   02FF C1 08         [ 2]  206 	cmpb #0x8
   0301 27 C4         [ 3]  207 	beq agosto
ASxxxx Assembler V05.40  (Motorola 6809)                                Page 5
Hexadecimal [16-Bits]                                 Tue May 17 23:20:34 2022



   0303 C1 09         [ 2]  208 	cmpb #0x9
   0305 27 C5         [ 3]  209 	beq septiembre
   0307 C1 10         [ 2]  210 	cmpb #0x10
   0309 27 C6         [ 3]  211 	beq octubre
   030B C1 11         [ 2]  212 	cmpb #0x11
   030D 27 C7         [ 3]  213 	beq noviembre
   030F 20 CA         [ 3]  214 	bra diciembre
                            215 
   0311                     216 imprimir:
   0311 A6 80         [ 6]  217 	lda ,x+
   0313 10 27 01 59   [ 6]  218 	lbeq regresar
   0317 B7 FF 00      [ 5]  219 	sta 0xFF00
   031A 20 F5         [ 3]  220 	bra imprimir
                            221 
   031C                     222 sumar_iteracion:
   031C 96 80         [ 4]  223 	lda 0x80
   031E 8B 01         [ 2]  224 	adda #0x01 
   0320 17 01 4E      [ 9]  225 	lbsr daa
   0323 97 80         [ 4]  226 	sta 0x80
   0325 96 81         [ 4]  227 	lda 0x81
   0327 4C            [ 2]  228 	inca
   0328 97 81         [ 4]  229 	sta 0x81
   032A 39            [ 5]  230 	rts
                            231 
   032B                     232 sumar_anio:
   032B EC 8D FE 21   [10]  233 	ldd aNo,pcr
   032F 1E 89         [ 8]  234 	exg a,b
   0331 9B 80         [ 4]  235 	adda 0x80
   0333 17 01 3B      [ 9]  236 	lbsr daa
   0336 81 00         [ 2]  237 	cmpa #0
   0338 27 07         [ 3]  238 	beq cambiar_siglo 
   033A 1E 89         [ 8]  239 	exg a,b
   033C ED 8D FE 10   [10]  240 	std aNo,pcr
   0340 39            [ 5]  241 	rts
                            242 
   0341                     243 cambiar_siglo:
   0341 37 04         [ 6]  244 	pulu b
   0343 C6 20         [ 2]  245 	ldb #0x20
   0345 36 04         [ 6]  246 	pshu b
   0347 1E 89         [ 8]  247 	exg a,b
   0349 ED 8D FE 03   [10]  248 	std aNo,pcr
   034D 39            [ 5]  249 	rts
                            250 
   034E                     251 comprobar_bisiesto:
   034E EC 8D FD FE   [10]  252 	ldd aNo,pcr
   0352 1F 98         [ 6]  253 	tfr b,a
   0354 84 01         [ 2]  254 	anda #1
   0356 81 00         [ 2]  255 	cmpa #0x00
   0358 26 2C         [ 3]  256 	bne no_bisiesto
   035A 1F 98         [ 6]  257 	tfr b,a
   035C 44            [ 2]  258 	lsra
   035D 84 01         [ 2]  259 	anda #1
   035F 81 00         [ 2]  260 	cmpa #0x00
   0361 26 23         [ 3]  261 	bne no_bisiesto
   0363 A6 8D FD ED   [ 9]  262 	lda dia,pcr
ASxxxx Assembler V05.40  (Motorola 6809)                                Page 6
Hexadecimal [16-Bits]                                 Tue May 17 23:20:34 2022



   0367 81 29         [ 2]  263 	cmpa #0x29	 
   0369 10 23 01 03   [ 6]  264 	lbls regresar 
   036D 8B 01         [ 2]  265 	adda #0x01	
   036F 17 00 FF      [ 9]  266 	lbsr daa
   0372 80 30         [ 2]  267 	suba #0x30
   0374 A7 8D FD DC   [ 9]  268 	sta dia,pcr
   0378 A6 8D FD D6   [ 9]  269 	lda mes,pcr
   037C 8B 01         [ 2]  270 	adda #0x01
   037E 17 00 F0      [ 9]  271 	lbsr daa
   0381 A7 8D FD CD   [ 9]  272 	sta mes,pcr
   0385 39            [ 5]  273 	rts
                            274 	
   0386                     275 no_bisiesto:
   0386 A6 8D FD CA   [ 9]  276 	lda dia,pcr
   038A 8B 02         [ 2]  277 	adda #0x02
   038C 17 00 E2      [ 9]  278 	lbsr daa
   038F 80 30         [ 2]  279 	suba #0x30
   0391 A7 8D FD BF   [ 9]  280 	sta dia,pcr
   0395 A6 8D FD B9   [ 9]  281 	lda mes,pcr	
   0399 8B 01         [ 2]  282 	adda #0x01
   039B 17 00 D3      [ 9]  283 	lbsr daa
   039E A7 8D FD B0   [ 9]  284 	sta mes,pcr
   03A2 39            [ 5]  285 	rts
                            286 
   03A3                     287 sumar_mes:
   03A3 A6 8D FD AB   [ 9]  288 	lda mes,pcr
   03A7 9B 80         [ 4]  289 	adda 0x80
   03A9 17 00 C5      [ 9]  290 	lbsr daa
   03AC A7 8D FD A2   [ 9]  291 	sta mes,pcr
   03B0 39            [ 5]  292 	rts
                            293 
   03B1                     294 comprobar_mes:
   03B1 A6 8D FD 9D   [ 9]  295 	lda mes,pcr
   03B5 81 12         [ 2]  296 	cmpa #0x12
   03B7 10 23 00 B5   [ 6]  297 	lbls regresar 
   03BB 8B 08         [ 2]  298 	adda #0x08
   03BD 17 00 B1      [ 9]  299 	lbsr daa
   03C0 80 20         [ 2]  300 	suba #0x20
   03C2 A7 8D FD 8C   [ 9]  301 	sta mes,pcr
   03C6 EC 8D FD 86   [10]  302 	ldd aNo,pcr
   03CA 1E 89         [ 8]  303 	exg a,b
   03CC 8B 01         [ 2]  304 	adda #0x1
   03CE 17 00 A0      [ 9]  305 	lbsr daa
   03D1 81 00         [ 2]  306 	cmpa #0
   03D3 10 27 FF 6A   [ 6]  307 	lbeq cambiar_siglo
   03D7 1E 89         [ 8]  308 	exg a,b
   03D9 ED 8D FD 73   [10]  309 	std aNo,pcr
   03DD 39            [ 5]  310 	rts
                            311 
   03DE                     312 suma_dia:
   03DE A6 8D FD 72   [ 9]  313 	lda dia,pcr
   03E2 9B 80         [ 4]  314 	adda 0x80
   03E4 17 00 8A      [ 9]  315 	lbsr daa
   03E7 A7 8D FD 69   [ 9]  316 	sta dia,pcr
   03EB 39            [ 5]  317 	rts
ASxxxx Assembler V05.40  (Motorola 6809)                                Page 7
Hexadecimal [16-Bits]                                 Tue May 17 23:20:34 2022



                            318 
   03EC                     319 comprobar_dia:
   03EC A6 8D FD 64   [ 9]  320 	lda dia,pcr
   03F0 E6 8D FD 5E   [ 9]  321 	ldb mes,pcr
   03F4 81 28         [ 2]  322 	cmpa #0x28		;COMPARA EL DIA CON 28
   03F6 23 78         [ 3]  323 	bls regresar 
   03F8 C1 02         [ 2]  324 	cmpb #0x02
   03FA 10 27 FF 50   [ 6]  325 	lbeq comprobar_bisiesto
   03FE 81 30         [ 2]  326 	cmpa #0x30		;COMPARA EL DIA CON 30
   0400 23 6E         [ 3]  327 	bls regresar 
   0402 C1 04         [ 2]  328 	cmpb #0x04
   0404 27 27         [ 3]  329 	beq rest_30_sum_mes
   0406 C1 06         [ 2]  330 	cmpb #0x06
   0408 27 23         [ 3]  331 	beq rest_30_sum_mes
   040A C1 09         [ 2]  332 	cmpb #0x09
   040C 27 1F         [ 3]  333 	beq rest_30_sum_mes
   040E C1 11         [ 2]  334 	cmpb #0x11
   0410 27 1B         [ 3]  335 	beq rest_30_sum_mes
   0412 81 31         [ 2]  336 	cmpa #0x31		;COMPARA EL DIA COM 31
   0414 23 5A         [ 3]  337 	bls regresar 
   0416 8B 09         [ 2]  338 	adda #0x09
   0418 8D 57         [ 7]  339 	bsr daa
   041A 80 40         [ 2]  340 	suba #0x40
   041C A7 8D FD 34   [ 9]  341 	sta dia,pcr
   0420 A6 8D FD 2E   [ 9]  342 	lda mes,pcr
   0424 8B 01         [ 2]  343 	adda #0x01
   0426 8D 49         [ 7]  344 	bsr daa
   0428 A7 8D FD 26   [ 9]  345 	sta mes,pcr
   042C 39            [ 5]  346 	rts
                            347 
   042D                     348 rest_30_sum_mes:
   042D A6 8D FD 23   [ 9]  349 	lda dia,pcr
   0431 80 30         [ 2]  350 	suba #0x30
   0433 A7 8D FD 1D   [ 9]  351 	sta dia,pcr
   0437 A6 8D FD 17   [ 9]  352 	lda mes,pcr
   043B 8B 01         [ 2]  353 	adda #0x01
   043D 8D 32         [ 7]  354 	bsr daa
   043F A7 8D FD 0F   [ 9]  355 	sta mes,pcr
   0443 39            [ 5]  356 	rts
                            357 
                            358 ;
                            359 ; imprime las cifras de mes, dia y año
                            360 ;
                            361 
   0444                     362 imprime:
   0444 C6 00         [ 2]  363 		ldb #0
   0446 81 80         [ 2]  364         cmpa #0x80
   0448 25 03         [ 3]  365         blo Menor80
   044A 5C            [ 2]  366         incb
   044B 80 80         [ 2]  367         suba #0x80
   044D                     368 Menor80:
   044D 58            [ 2]  369 		lslb
   044E 81 40         [ 2]  370         cmpa #0x40
   0450 25 03         [ 3]  371         blo Menor40
   0452 5C            [ 2]  372         incb
ASxxxx Assembler V05.40  (Motorola 6809)                                Page 8
Hexadecimal [16-Bits]                                 Tue May 17 23:20:34 2022



   0453 80 40         [ 2]  373         suba #0x40
   0455                     374 Menor40:
   0455 58            [ 2]  375 		lslb
   0456 81 20         [ 2]  376         cmpa #0x20
   0458 25 03         [ 3]  377         blo Menor20
   045A 5C            [ 2]  378         incb
   045B 80 20         [ 2]  379         suba #0x20
   045D                     380 Menor20:
   045D 58            [ 2]  381 		lslb
   045E 81 10         [ 2]  382         cmpa #0x10
   0460 25 03         [ 3]  383         blo Menor10
   0462 5C            [ 2]  384         incb
   0463 80 10         [ 2]  385         suba #0x10
   0465                     386 Menor10:
   0465 CB 30         [ 2]  387 		addb #'0
   0467 8B 30         [ 2]  388         adda #'0
                            389 
   0469                     390 imprime_cifra_b:
   0469 F7 FF 00      [ 5]  391         stb 0xFF00 
                            392 
   046C                     393 imprime_cifra_a:
   046C B7 FF 00      [ 5]  394         sta 0xFF00 
   046F 39            [ 5]  395 		rts
                            396 	
   0470                     397 regresar:
   0470 39            [ 5]  398   	rts
                            399 
                            400 
                            401   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                            402   ; daa                                                              ;
                            403   ;     simula la instrucciOn daa del ensamblador                    ;
                            404   ;     se debe usar detAs de la instrucciOn adda para sumas BCD     ;
                            405   ;                                                                  ;
                            406   ;   Entrada: A-resultado de la suma    CC-flags de la suma         ;
                            407   ;   Salida:  A-resultado ajustado BCD  CC-flags ajustados BCD      ;
                            408   ;   Registros afectados: ninguno                                   ;
                            409   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                            410 
   0471                     411 daa:
   0471 34 03         [ 7]  412   pshs a,cc
   0473 A6 E4         [ 4]  413   lda ,s             ; A=CC
   0475 6F E2         [ 8]  414   clr ,-s            ; S-> 00 CC A
   0477 84 20         [ 2]  415   anda #0x20         ; bit H de CC
   0479 26 08         [ 3]  416   bne daa_ajusteBajo ; si H=1, hay que ajustar la cifra baja
   047B A6 62         [ 5]  417   lda 2,s            ; si H=0 y la cifra baja>9, ajustarla
   047D 84 0F         [ 2]  418   anda #0xF
   047F 81 0A         [ 2]  419   cmpa #0xA
   0481 25 04         [ 3]  420   blo daa_sinAjusteBajo
                            421 
   0483                     422 daa_ajusteBajo:
   0483 86 06         [ 2]  423   lda #6
   0485 A7 E4         [ 4]  424   sta ,s
                            425 
   0487                     426 daa_sinAjusteBajo:
   0487 86 01         [ 2]  427   lda #1
ASxxxx Assembler V05.40  (Motorola 6809)                                Page 9
Hexadecimal [16-Bits]                                 Tue May 17 23:20:34 2022



   0489 A4 61         [ 5]  428   anda 1,s
   048B 26 06         [ 3]  429   bne daa_ajusteAlto    ; si flag C=1, hay que ajustar la alta
   048D A6 62         [ 5]  430   lda 2,s               ; o si C=0 y resultado>0x9A
   048F 81 9A         [ 2]  431   cmpa #0x9A
   0491 25 06         [ 3]  432   blo daa_sinAjusteAlto
                            433 
   0493                     434 daa_ajusteAlto:
   0493 A6 E4         [ 4]  435   lda ,s
   0495 8A 60         [ 2]  436   ora #0x60
   0497 A7 E4         [ 4]  437   sta ,s
                            438 
   0499                     439 daa_sinAjusteAlto:
   0499 A6 E0         [ 6]  440   lda  ,s+   ; aNadimos el ajuste a A
   049B AB 61         [ 5]  441   adda 1,s
   049D A7 61         [ 5]  442   sta  1,s
   049F 1F A8         [ 6]  443   tfr cc,a   ; el flag C es el or del C original y el de la suma
   04A1 AA E4         [ 4]  444   ora ,s
   04A3 A7 E4         [ 4]  445   sta ,s
   04A5 35 03         [ 7]  446   puls cc,a 
   04A7 4D            [ 2]  447   tsta       ; ajustamos los flags Z y N del resultado
   04A8 39            [ 5]  448   rts
                            449 
                            450 	
   04A9                     451 acabar: 
   04A9 4F            [ 2]  452 	clra
   04AA B7 FF 01      [ 5]  453 	sta 0xFF01
                            454 
   FFFE                     455 	.org 0xFFFE
   FFFE 01 C8               456 	.word programa
                            457 
ASxxxx Assembler V05.40  (Motorola 6809)                               Page 10
Hexadecimal [16-Bits]                                 Tue May 17 23:20:34 2022

Symbol Table

    .__.$$$.       =   2710 L   |     .__.ABS.       =   0000 G
    .__.CPU.       =   0000 L   |     .__.H$L.       =   0001 L
  2 Menor10            0465 R   |   2 Menor20            045D R
  2 Menor40            0455 R   |   2 Menor80            044D R
  2 Ncumples           0156 R   |   2 aNo                0150 R
  2 abril              02B3 R   |   2 abril_str          0171 R
  2 acabar             04A9 R   |   2 agosto             02C7 R
  2 agosto_str         0190 R   |   2 bucle_n_cumple     01E7 R
  2 cambiar_siglo      0341 R   |   2 compara_iter       0201 R
  2 comprobar_bisi     034E R   |   2 comprobar_dia      03EC R
  2 comprobar_mes      03B1 R   |   2 daa                0471 R
  2 daa_ajusteAlto     0493 R   |   2 daa_ajusteBajo     0483 R
  2 daa_sinAjusteA     0499 R   |   2 daa_sinAjusteB     0487 R
  2 dia                0154 R   |   2 diciembre          02DB R
  2 diciembre_str      01BC R   |   2 enero              02A4 R
  2 enero_str          0157 R   |   2 febrero            02A9 R
  2 febrero_str        015F R   |   2 imprime            0444 R
  2 imprime_19         0237 R   |   2 imprime_ano        0222 R
  2 imprime_cifra_     046C R   |   2 imprime_cifra_     0469 R
  2 imprime_de         026F R   |   2 imprime_dia        0214 R
  2 imprime_iter       020E R   |   2 imprime_mes        021B R
  2 imprime_salto      0245 R   |   2 imprimir           0311 R
  2 julio              02C2 R   |   2 julio_str          0188 R
  2 junio              02BD R   |   2 junio_str          0180 R
  2 marzo              02AE R   |   2 marzo_str          0169 R
  2 mayo               02B8 R   |   2 mayo_str           0179 R
  2 mes                0152 R   |   2 mostrarMes         02E0 R
  2 no_bisiesto        0386 R   |   2 noviembre          02D6 R
  2 noviembre_str      01B0 R   |   2 octubre            02D1 R
  2 octubre_str        01A6 R   |   2 poner_pila         027A R
  2 presentar          024B R   |   2 programa           01C8 GR
  2 regresar           0470 R   |   2 rest_30_sum_me     042D R
  2 sacar_pila         028F R   |   2 septiembre         02CC R
  2 septiembre_str     0199 R   |   2 suma_dia           03DE R
  2 sumar_anio         032B R   |   2 sumar_iteracio     031C R
  2 sumar_mes          03A3 R

ASxxxx Assembler V05.40  (Motorola 6809)                               Page 11
Hexadecimal [16-Bits]                                 Tue May 17 23:20:34 2022

Area Table

[_CSEG]
   0 _CODE            size    0   flags C080
   2 PROG             size    0   flags  908
[_DSEG]
   1 _DATA            size    0   flags C0C0

